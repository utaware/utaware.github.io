import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a,o as l}from"./app-DywCN-wo.js";const t={};function n(r,i){return l(),e("div",null,[...i[0]||(i[0]=[a(`<h1 id="资源预加载" tabindex="-1"><a class="header-anchor" href="#资源预加载"><span>资源预加载</span></a></h1><h2 id="css" tabindex="-1"><a class="header-anchor" href="#css"><span>CSS</span></a></h2><h3 id="link-rel-preload" tabindex="-1"><a class="header-anchor" href="#link-rel-preload"><span><code>&lt;link rel=&quot;preload&quot;&gt;</code></span></a></h3><ul><li>用途: 声明式地预加载关键资源（如脚本、样式、字体等），优先级优先于页面渲染流程加载资源。</li><li>特点: <ul><li>浏览器会优先加载指定资源，但不会自动执行或应用（需手动处理）。</li><li>支持 as 属性指定资源类型（如 script、style、font 等），帮助浏览器优化加载策略。</li><li>可通过 onload 事件处理加载完成后的逻辑。</li></ul></li></ul><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-html"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">link</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> rel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;preload&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> href</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;critical.js&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;script&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="link-rel-prefetch" tabindex="-1"><a class="header-anchor" href="#link-rel-prefetch"><span><code>&lt;link rel=&quot;prefetch&quot;&gt;</code></span></a></h3><ul><li>用途: 预加载未来可能需要的资源（如用户可能跳转的下一页资源），优先级较低。</li><li>特点: <ul><li>浏览器会在空闲时加载资源，不阻塞当前页面渲染。</li><li>适用于提前加载非首屏但可能用到的资源（如分页内容、模态框组件）。</li></ul></li></ul><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-html"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">link</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> rel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prefetch&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> href</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;next-page.js&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;script&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="link-rel-preconnect-和-link-rel-dns-prefetch" tabindex="-1"><a class="header-anchor" href="#link-rel-preconnect-和-link-rel-dns-prefetch"><span><code>&lt;link rel=&quot;preconnect&quot;&gt;</code> 和 <code>&lt;link rel=&quot;dns-prefetch&quot;&gt;</code></span></a></h3><ul><li>用途: 提前建立与第三方域名的连接，减少跨域资源的加载延迟。</li><li>区别: <ul><li><code>dns-prefetch</code>：仅提前解析 DNS（将域名转换为 IP 地址）。</li><li><code>preconnect</code>：不仅解析 DNS，还会建立 TCP 连接（若为 HTTPS 则包括 TLS 握手），优化更彻底。</li></ul></li></ul><h3 id="link-rel-prerender" tabindex="-1"><a class="header-anchor" href="#link-rel-prerender"><span><code>&lt;link rel=&quot;prerender&quot;&gt;</code></span></a></h3><ul><li>用途: 预加载并渲染整个页面（包括 DOM、CSS、JS 等），用户跳转时可直接显示。</li><li>特点: <ul><li>资源消耗较高，适用于高概率访问的页面（如首页、热门页）</li><li>部分浏览器可能限制其使用（如 Chrome 对频繁滥用的页面会禁用）。</li></ul></li></ul><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-html"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">link</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> rel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prerender&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> href</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/home&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="动态创建dom元素预加载" tabindex="-1"><a class="header-anchor" href="#动态创建dom元素预加载"><span>动态创建DOM元素预加载</span></a></h3><ul><li>用途: 通过 JavaScript 动态创建 <code>&lt;script&gt;</code>、<code>&lt;link&gt;</code> 等标签，手动触发资源加载。</li><li>特点: <ul><li>灵活性高，可根据用户行为（如滚动、点击）动态决定是否预加载。</li><li>需注意避免阻塞主线程。</li></ul></li></ul><h3 id="service-worker-预缓存" tabindex="-1"><a class="header-anchor" href="#service-worker-预缓存"><span>Service Worker 预缓存</span></a></h3><ul><li>用途: 通过 Service Worker 拦截网络请求，在页面加载前预缓存指定资源（结合 PWA 技术）</li><li>特点: <ul><li>支持离线访问，资源可从缓存直接读取，大幅提升二次加载速度。</li><li>需配合 workbox 等工具简化实现。</li></ul></li></ul><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// sw.js</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">precacheAndRoute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;workbox-precaching&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">precacheAndRoute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">__WB_MANIFEST</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 预缓存构建时生成的资源列表</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="css-预加载-import-或-font-display" tabindex="-1"><a class="header-anchor" href="#css-预加载-import-或-font-display"><span>CSS 预加载（@import 或 font-display）</span></a></h3><ul><li>用途: 针对字体等资源，通过 CSS 策略优化加载。 <ul><li><code>@import</code>：在 CSS 中提前引入资源（但可能阻塞渲染，慎用）。</li><li><code>font-display: swap</code>：字体加载期间先显示 fallback 文本，避免 FOIT（不可见文本闪烁）。</li></ul></li></ul><h2 id="选择建议" tabindex="-1"><a class="header-anchor" href="#选择建议"><span>选择建议</span></a></h2><ul><li>首屏关键资源（如核心 JS/CSS）：用 <code>preload</code>。</li><li>未来可能访问的资源：用 <code>prefetch</code>。</li><li>跨域资源：优先 <code>preconnect</code> 或 <code>dns-prefetch</code>。</li><li>整页预渲染：谨慎使用 <code>prerender</code>，避免资源浪费。</li><li>离线支持或复杂缓存策略：用 <code>Service Worker</code>。</li></ul>`,22)])])}const p=s(t,[["render",n]]),o=JSON.parse('{"path":"/web/browser/%E8%B5%84%E6%BA%90%E9%A2%84%E5%8A%A0%E8%BD%BD.html","title":"资源预加载","lang":"zh-CN","frontmatter":{"date":"2024-11-16T00:00:00.000Z","category":["web"],"tag":["brower"],"description":"资源预加载 CSS <link rel=\\"preload\\"> 用途: 声明式地预加载关键资源（如脚本、样式、字体等），优先级优先于页面渲染流程加载资源。 特点: 浏览器会优先加载指定资源，但不会自动执行或应用（需手动处理）。 支持 as 属性指定资源类型（如 script、style、font 等），帮助浏览器优化加载策略。 可通过 onload 事件...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"资源预加载\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-16T00:00:00.000Z\\",\\"dateModified\\":\\"2025-11-15T22:52:39.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"utaware\\",\\"url\\":\\"https://github.com/utaware\\"}]}"],["meta",{"property":"og:url","content":"https://github.com/utaware/web/browser/%E8%B5%84%E6%BA%90%E9%A2%84%E5%8A%A0%E8%BD%BD.html"}],["meta",{"property":"og:site_name","content":"utaware"}],["meta",{"property":"og:title","content":"资源预加载"}],["meta",{"property":"og:description","content":"资源预加载 CSS <link rel=\\"preload\\"> 用途: 声明式地预加载关键资源（如脚本、样式、字体等），优先级优先于页面渲染流程加载资源。 特点: 浏览器会优先加载指定资源，但不会自动执行或应用（需手动处理）。 支持 as 属性指定资源类型（如 script、style、font 等），帮助浏览器优化加载策略。 可通过 onload 事件..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-15T22:52:39.000Z"}],["meta",{"property":"article:tag","content":"brower"}],["meta",{"property":"article:published_time","content":"2024-11-16T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-15T22:52:39.000Z"}]]},"git":{"createdTime":1763247159000,"updatedTime":1763247159000,"contributors":[{"name":"utaware","username":"utaware","email":"1264051408@qq.com","commits":1,"url":"https://github.com/utaware"}]},"readingTime":{"minutes":2.33,"words":700},"filePathRelative":"web/browser/资源预加载.md","excerpt":"","autoDesc":true}');export{p as comp,o as data};
