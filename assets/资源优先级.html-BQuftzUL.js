import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,a as t,o as a}from"./app-DywCN-wo.js";const l={};function n(r,i){return a(),s("div",null,[...i[0]||(i[0]=[t(`<h1 id="资源优先级" tabindex="-1"><a class="header-anchor" href="#资源优先级"><span>资源优先级</span></a></h1><p>浏览器主要根据「请求的类型」和在「文档标记中的位置」来确定请求的优先级</p><h2 id="加载阶段" tabindex="-1"><a class="header-anchor" href="#加载阶段"><span>加载阶段</span></a></h2><ul><li>紧凑模式(Tight mode)</li><li>空闲模式(Idle mode)</li></ul><p><strong>紧凑模式</strong></p><p>紧凑模式Tight mode是初始阶段，它会「限制加载低优先级的资源」，直到文档的<code>&lt;body&gt;</code>被追加到文档中（基本上，在<code>&lt;head&gt;</code>中的所有阻塞脚本执行完毕后）。在紧凑模式下，发现这些低优先级资源时，只有在「同时存在不超过2个正在进行的请求」，才会加载它们。</p><p><strong>空闲模式</strong></p><p>在 空闲模式Idle mode中，浏览器会「在页面空闲时加载资源」。它会根据资源的优先级和是否可见来决定何时加载资源，以提高性能和用户体验。</p><h2 id="优先级" tabindex="-1"><a class="header-anchor" href="#优先级"><span>优先级</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>各浏览器对资源优先级的分配存在差异，以<code>Chromium</code>为例：</p></div><ul><li>Highest <ul><li>主HTML文档</li><li>Font</li><li>css(early**)</li></ul></li><li>High <ul><li>script(early**)</li><li>import</li><li>xhr/fetch*</li><li>image(in viewport - after layout)</li><li>preload*</li></ul></li><li>Medium <ul><li>image(first 5 images &gt; 10000 px<sup>2</sup>)</li><li>css(late**)</li><li>script(late**)</li></ul></li><li>Low <ul><li>image</li><li>script(async/defer)</li><li>media(vedio/audio)</li><li>svg</li></ul></li><li>Lowest <ul><li>prefecth</li></ul></li></ul><p><a href="https://docs.google.com/document/d/1bCDuq9H1ih9iNjgzyAL0gpwNFiEP4TZS-YLRp_RuMlc/edit" target="_blank" rel="noopener noreferrer"><code>Chromium</code>的资源优先级文档</a></p><h2 id="fetchpriority" tabindex="-1"><a class="header-anchor" href="#fetchpriority"><span>fetchpriority</span></a></h2><p><code>fetchpriority</code>属性可以用于提示浏览器增加或降低所请求资源的优先级。</p><ul><li>high : 该资源「相对于其默认优先级」更高</li><li>low : 该资源相「对于其默认优先级」更低</li><li>auto : 默认值</li></ul><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-html"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">&lt;!-- 将 preload 和 fetchpriority 合并兼容浏览器处理 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">link</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  rel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;preload&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;image&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  fetchpriority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;high&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  href</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://cdn.glitch.global/.../image-1.jpg&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fetch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/api/data.json&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;high&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> })</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,17)])])}const o=e(l,[["render",n]]),d=JSON.parse('{"path":"/web/browser/%E8%B5%84%E6%BA%90%E4%BC%98%E5%85%88%E7%BA%A7.html","title":"资源优先级","lang":"zh-CN","frontmatter":{"date":"2024-03-29T00:00:00.000Z","category":["web"],"tag":["browser"],"description":"资源优先级 浏览器主要根据「请求的类型」和在「文档标记中的位置」来确定请求的优先级 加载阶段 紧凑模式(Tight mode) 空闲模式(Idle mode) 紧凑模式 紧凑模式Tight mode是初始阶段，它会「限制加载低优先级的资源」，直到文档的<body>被追加到文档中（基本上，在<head>中的所有阻塞脚本执行完毕后）。在紧凑模式下，发现这些...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"资源优先级\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-03-29T00:00:00.000Z\\",\\"dateModified\\":\\"2024-03-29T23:46:09.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"utaware\\",\\"url\\":\\"https://github.com/utaware\\"}]}"],["meta",{"property":"og:url","content":"https://github.com/utaware/web/browser/%E8%B5%84%E6%BA%90%E4%BC%98%E5%85%88%E7%BA%A7.html"}],["meta",{"property":"og:site_name","content":"utaware"}],["meta",{"property":"og:title","content":"资源优先级"}],["meta",{"property":"og:description","content":"资源优先级 浏览器主要根据「请求的类型」和在「文档标记中的位置」来确定请求的优先级 加载阶段 紧凑模式(Tight mode) 空闲模式(Idle mode) 紧凑模式 紧凑模式Tight mode是初始阶段，它会「限制加载低优先级的资源」，直到文档的<body>被追加到文档中（基本上，在<head>中的所有阻塞脚本执行完毕后）。在紧凑模式下，发现这些..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-29T23:46:09.000Z"}],["meta",{"property":"article:tag","content":"browser"}],["meta",{"property":"article:published_time","content":"2024-03-29T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-29T23:46:09.000Z"}]]},"git":{"createdTime":1711755969000,"updatedTime":1711755969000,"contributors":[{"name":"utaware","username":"utaware","email":"1264051408@qq.com","commits":1,"url":"https://github.com/utaware"}]},"readingTime":{"minutes":1.31,"words":394},"filePathRelative":"web/browser/资源优先级.md","excerpt":"","autoDesc":true}');export{o as comp,d as data};
