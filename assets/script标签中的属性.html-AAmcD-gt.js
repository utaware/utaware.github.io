import{_ as i}from"./plugin-vue_export-helper-x3n3nnut.js";import{r,o,c as l,e as d,w as a,b as t,d as s,a as p}from"./app-qSMjXEym.js";const u={},h=t("h1",{id:"script-标签中的属性",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#script-标签中的属性","aria-hidden":"true"},"#"),s(" script 标签中的属性")],-1),k=t("h2",{id:"async-defer",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#async-defer","aria-hidden":"true"},"#"),s(" async && defer")],-1),m=t("div",{class:"language-html line-numbers-mode","data-ext":"html"},[t("pre",{class:"language-html"},[t("code",null,[t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),s("script")]),s(),t("span",{class:"token attr-name"},"src"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),s("script.js"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),t("span",{class:"token script"}),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),s("script")]),t("span",{class:"token punctuation"},">")]),s(`
`)])]),t("div",{class:"line-numbers","aria-hidden":"true"},[t("div",{class:"line-number"})])],-1),_=t("p",null,"浏览器在解析 HTML 的时候，如果遇到一个没有任何属性的 script 标签，就会暂停解析，先发送网络请求获取该 JS 脚本的代码内容，然后让 JS 引擎执行该代码，当代码执行完毕后恢复解析。",-1),g=t("div",{class:"language-html line-numbers-mode","data-ext":"html"},[t("pre",{class:"language-html"},[t("code",null,[t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),s("script")]),s(),t("span",{class:"token attr-name"},"src"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),s("script.js"),t("span",{class:"token punctuation"},'"')]),s(),t("span",{class:"token attr-name"},"async"),t("span",{class:"token punctuation"},">")]),t("span",{class:"token script"}),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),s("script")]),t("span",{class:"token punctuation"},">")]),s(`
`)])]),t("div",{class:"line-numbers","aria-hidden":"true"},[t("div",{class:"line-number"})])],-1),f=t("p",null,"当浏览器遇到带有 async 属性的 script 时，请求该脚本的网络请求是异步的，不会阻塞浏览器解析 HTML，一旦网络请求回来之后，如果此时 HTML 还没有解析完，浏览器会暂停解析，先让 JS 引擎执行代码，执行完毕后再进行解析。因为执行时间不确定，所以 async 是不可控的，如果存在多个 async-script 的时候，它们之间的执行顺序也不确定，完全依赖于网络传输结果，谁先到执行谁。",-1),v=t("div",{class:"language-html line-numbers-mode","data-ext":"html"},[t("pre",{class:"language-html"},[t("code",null,[t("span",{class:"token comment"},"<!-- defer 属性对模块脚本没有作用 —— 默认defer -->"),s(`
`),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),s("script")]),s(),t("span",{class:"token attr-name"},"src"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),s("script.js"),t("span",{class:"token punctuation"},'"')]),s(),t("span",{class:"token attr-name"},"defer"),t("span",{class:"token punctuation"},">")]),t("span",{class:"token script"}),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),s("script")]),t("span",{class:"token punctuation"},">")]),s(`
`)])]),t("div",{class:"line-numbers","aria-hidden":"true"},[t("div",{class:"line-number"}),t("div",{class:"line-number"})])],-1),b=t("p",null,"当浏览器遇到带有 defer 属性的 script 时，获取该脚本的网络请求也是异步的，不会阻塞浏览器解析 HTML，一旦网络请求回来之后，如果此时 HTML 还没有解析完，浏览器不会暂停解析并执行 JS 代码，而是等待 HTML 解析完毕再执行 JS 代码。如果存在多个 defer-script 标签，浏览器(IE9 及以下除外)会保证它们按照在 HTML 中出现的顺序执行，不会破坏 JS 脚本之间的依赖关系。",-1),y=p('<table><thead><tr><th>script 标签</th><th>JS 执行顺序</th><th>是否阻塞解析 HTML</th></tr></thead><tbody><tr><td><code>&lt;script&gt;</code></td><td>在 HTML 中的顺序</td><td>阻塞</td></tr><tr><td><code>&lt;script async&gt;</code></td><td>网络请求返回顺序</td><td>可能阻塞，也可能不阻塞</td></tr><tr><td><code>&lt;script defer&gt;</code></td><td>在 HTML 中的顺序</td><td>不阻塞</td></tr></tbody></table><h3 id="区别" tabindex="-1"><a class="header-anchor" href="#区别" aria-hidden="true">#</a> 区别</h3><ul><li>defer 是“渲染完再执行”，async 是“下载完就执行”。</li><li>如果有多个 defer 脚本，会按照它们在页面出现的顺序加载，而多个 async 脚本是不能保证加载顺序的；</li></ul><p><strong>注意：如果同时指定了两个属性，则会遵从 async 属性而忽略 defer 属性</strong></p><h2 id="src" tabindex="-1"><a class="header-anchor" href="#src" aria-hidden="true">#</a> src</h2><p>这个属性定义引用外部脚本的 URI，这可以用来代替直接在文档中嵌入脚本。指定了 src 属性的 script 元素标签内不应该再有嵌入的脚本。</p><h2 id="type" tabindex="-1"><a class="header-anchor" href="#type" aria-hidden="true">#</a> type</h2><p>该属性定义 script 元素包含或 src 引用的脚本语言。属性的值为 MIME 类型，但大部分已不赞成使用，如果不是支持的类型所包含的内容则会被当做数据块而不被执行。如果属性为 module，代码会被当做 javascript 模块。</p><h2 id="crossorigin" tabindex="-1"><a class="header-anchor" href="#crossorigin" aria-hidden="true">#</a> crossorigin</h2><p>相当于开启了 cors 校验，跨域的 script 资源在运行出错的时候，window.onerror 可以捕获到完整的错误信息。</p><ul><li>anonymous - 不携带 cookie 等认证信息</li><li>use-credentials - 携带 cookie 等认证信息</li></ul><h2 id="integrity" tabindex="-1"><a class="header-anchor" href="#integrity" aria-hidden="true">#</a> integrity</h2><p>指定了该值之后，浏览器在拿到资源后会用 integrity 指定的签名算法对资源进行计算并与 摘要签名内容 进行比较，如果值不统一，说明是经过篡改的，就不会执行该资源</p>',13);function x(T,M){const c=r("Tabs");return o(),l("div",null,[h,k,d(c,{id:"6",data:[{id:"normal"},{id:"async"},{id:"defer"}]},{title0:a(({value:e,isActive:n})=>[s("normal")]),title1:a(({value:e,isActive:n})=>[s("async")]),title2:a(({value:e,isActive:n})=>[s("defer")]),tab0:a(({value:e,isActive:n})=>[m,_]),tab1:a(({value:e,isActive:n})=>[g,f]),tab2:a(({value:e,isActive:n})=>[v,b]),_:1}),y])}const S=i(u,[["render",x],["__file","script标签中的属性.html.vue"]]);export{S as default};
