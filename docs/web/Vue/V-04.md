---
date: 2022-07-25
category:
  - web
tag:
  - vue
---

# vue指令

* 内置指令
* 自定义指令
* 特殊`attribute`

## 内置指令

*   内容渲染
    *   `v-text`
    *   `v-html`
*   条件渲染
    *   `v-show`
    *   `v-if`
    *   `v-else`
    *   `v-else-if`
*   列表渲染
    *   `v-for`
*   事件绑定
    *   `v-on` : 绑定事件监听, 一般简写为@
*   属性绑定
    *   `v-bind` : 强制绑定解析表达式, 可以省略v-bind
*   双向绑定
    *   `v-model` : 双向数据绑定

### `v-once`

1. v-once所在节点在初次动态渲染后，就视为静态内容了。
2. 以后数据的改变不会引起v-once所在结构的更新，可以用于优化性能。

### `v-pre`

1. 跳过其所在节点的编译过程
2. 可利用它跳过：没有使用指令语法、没有使用插值语法的节点，会加快编译。

### `v-cloak`

> 使用它防止闪现表达式, 与css配合: `[v-cloak] { display: none }`

1. 本质是一个特殊属性，Vue实例创建完毕并接管容器后，会删掉v-cloak属性。
2. 使用css配合v-cloak可以解决网速慢时页面展示出`{{xxx}}`的问题。

### `v-slot`

> 为具名插槽和作用域插槽引入统一新语法

## 自定义指令

> 根据提供的钩子函数在对应情况下实现业务需求

* bind：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。
* inserted：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。
* update：所在组件的 VNode 更新时调用，但是可能发生在其子 VNode 更新之前。
* componentUpdated：指令所在组件的 VNode 及其子 VNode 全部更新后调用。
* unbind：只调用一次，指令与元素解绑时调用。

[custom-directive](https://cn.vuejs.org/v2/guide/custom-directive.html)

## 特殊属性

* key: 用在 Vue 的虚拟 DOM 算法, 重复的 key 会造成渲染错误
* ref: 用来给元素或子组件注册引用信息, 引用信息将会注册在父组件的$refs对象上
* is: 用于动态组件且基于 DOM 内模板的限制来工作

## 场景

1. v-copy 复制文本内容
2. v-longpress 长按按钮
3. v-debounce 防抖
4. v-LazyLoad 懒加载
5. v-draggable 拖拽
6. v-premission 权限校验指令
7. v-waterMarker 页面水印
8. v-emoji 禁止表情及特殊字符

[实现](https://juejin.cn/post/6906028995133833230)

## 笔记

**v-if和v-for哪个优先级更高**

1. 不应该把v-for和v-if放一起
2. vue2中，v-for的优先级是高于v-if
3. vue3中则完全相反，v-if的优先级高于v-for

**v-if和v-show有什么不同**

1. v-show是通过控制css的display属性值
2. v-if是通过在编译阶段将dom元素添加或卸载
